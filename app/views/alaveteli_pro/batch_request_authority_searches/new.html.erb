<% @title = _('Add authorities to your batch') %>

<div class="pro-canvas">

  <div class="pro-canvas-header">
    <div class="row">
      <h1 class="small-12 columns"><%= @title %></h1>
    </div>
  </div>

  <div class="pro-canvas-body">

    <div class="row">
      <div class="small-12 medium-6 columns">

        <div class="batch-authority-search js-batch-authority-search">
          <%= form_tag alaveteli_pro_batch_request_authority_searches_path,
                       method: :get,
                       class: 'batch-authority-search__form js-batch-authority-search-form' do %>
            <% if @draft_batch_request.id %>
              <%= hidden_field_tag :draft_id,
                                   @draft_batch_request.id,
                                   class: 'js-batch-authority-search-form-draft-id' %>
            <% end %>
            <label for="query"><%= _('Search for an authority by name') %></label>
            <input type="text"
                   name="query"
                   class="batch-authority-search__form__query js-batch-authority-search-form-query"
                   id="query"
                   value="<%= @query %>"
                   placeholder="eg. Cabinet Office"
                   autofocus>
            <input type="submit" value="<%= _('Search') %>" class="batch-authority-search__form__submit">
          <% end %>
        </div>

      </div>
    </div>

    <div class="row">
      <div class="small-12 medium-6 columns">

          <div class="batch-authority-search__results js-batch-authority-search-results"
               data-ajax-error-message="<%= _('Sorry, something went wrong ' \
                                              'getting your results, please ' \
                                              'try searching again.') %>">
            <%= render partial: 'search_results',
                       locals: { search: @search,
                                 draft_batch_request: @draft_batch_request,
                                 body_ids_added: @body_ids_added,
                                 query: @query,
                                 page: @page,
                                 per_page: @per_page,
                                 result_limit: @result_limit } %>
          </div>

      </div>
      <div class="small-12 medium-6 columns">

        <div class="draft-batch-request js-draft-batch-request"
             data-ajax-error-message="<%= _('Sorry, something went wrong updating' \
                                            'your batch request, please try again.') %>">
          <%= render partial: 'alaveteli_pro/draft_info_request_batches/summary',
                     locals: { draft: @draft_batch_request,
                               query: @query } %>
        </div>

      </div>
    </div>

  </div>
</div>
