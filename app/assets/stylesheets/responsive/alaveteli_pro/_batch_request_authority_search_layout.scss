.batch-builder-mode {
    margin-bottom: 1em;

    .tabs {
        @include grid-row();
        padding-left: 0;
    }

    .tab-title {
        margin-left: 1em;
    }
}

.batch-builder {
    @include grid-row();

    @media #{$large-up} {
        @include flexbox();
        @include flex-wrap(wrap);
    }
}

.batch-builder__search-form,
.batch-builder__search-results,
.batch-builder__chosen-authorities,
.batch-builder__actions {
    padding: ($column-gutter / 2); // Same padding as grid-columns

    @media #{$large-up} {
        width: 50%;
    }
}

@media #{$large-up} {
    .batch-builder--search {
        .batch-builder__search-form {
            @include flex-order(1);
        }

        .batch-builder__actions {
            @include flex-order(2);
        }

        .batch-builder__search-results {
            @include flex-order(3);
        }

        .batch-builder__chosen-authorities {
            @include flex-order(4);
        }
    }

    .batch-builder--browse {
        .batch-builder__actions {
            width: 100%;
        }
    }
}

.batch-builder__search-form {
    form {
        margin-bottom: 0;
    }

    input[type="text"] { // need to be at least as specific as `form input[type="text"]`
        width: 100%;
        margin-bottom: 0;
    }
}

.batch-builder__actions {
    @include flexbox();
    @include justify-content(flex-end);
    @include flex-align(flex-end);

    form {
        margin-bottom: 0;
    }
}

.batch-builder__list {
    list-style: none;
    padding: 0;
    margin: 0;

    height: 30em;
    overflow: auto;
}

.batch-builder__list__item {
    padding: 1em;
    @include flexbox();
    @include flex-align(center);
}

.batch-builder__list__item__name {
    @include flex(1 0 0%);
}

.batch-builder__list__item__action {
    @include flex(0 0 auto);
    margin-bottom: 0;

    form {
        margin-bottom: 0;
    }

    input[type="submit"] { // need to be more specific than `form input[type="submit"]`
        margin: -0.5em 0;
        font-size: 0.8em;
    }
}

.batch-builder__list__page-info {
    text-align: center;
}

.batch-builder__list__group {
    ul {
        padding-left: 0; // reset default list padding

        .batch-builder__list__item {
            padding-left: 2em; // group children are indented
        }

        ul .batch-builder__list__item {
            padding-left: 4em; // grandchildren are indented even more
        }
    }
}

@-webkit-keyframes spin {
    from {-webkit-transform: rotate(0deg);}
    to   {-webkit-transform: rotate(359deg);}
}

@keyframes spin {
    from {transform: rotate(0deg);}
    to   {transform: rotate(359deg);}
}

.batch-builder__list__item__caret {
    padding-right: 0.5em;

    &:before {
        content: "";
        display: block;
        width: 12px;
        height: 12px;
        background: transparent image-url('alaveteli-pro/batch-control-sprite.png') no-repeat 0 0;
        background-image: image-url('alaveteli-pro/batch-control-sprite.svg'), none;
        -ms-transform: rotate(180deg);
        transform: rotate(180deg);
    }

    // We use direct descendant selectors here because we only want the
    // *closest* descendant caret to get the styling, not *all* carets.
    .batch-builder__list__group--closed > .batch-builder__list__item > & {
        &:before {
            -ms-transform: rotate(90deg);
            transform: rotate(90deg);
        }
    }

    .batch-builder__list__group--loading > .batch-builder__list__item > & {
        &:before {
            background-position: -12px 0;
            -webkit-animation: spin 1s infinite linear;
            animation: spin 1s infinite linear;
        }
    }
}
